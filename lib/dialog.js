/*from tccdn minify at 2016-5-18 14:55:46,fileï¼š/cn/public/module/dialog/0.1/dialog.js?v=13082102*/
!function(){function m(g,h){var i,j,k,l=Array.prototype.slice;return"string"==typeof h&&(i=g[h],h=g,g=i),j=l.call(arguments,2),k=function(){return g.apply(h,j.concat(l.call(arguments)))}}function n(){var c,d=this;c=document.createElement("div"),c.className="page-mask",c.style.zIndex=d.zIndexObj.mask,c.innerHTML='<iframe style="filter:progid:DXImageTransform.Microsoft.Alpha(opacity:0);position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1" src="about:blank" frameborder="0"></iframe><div style="position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1;">&nbsp;</div>',document.body.appendChild(c),d.pageMask=c,fish.one(c).on("click",d.eventHand)}function o(){var c=this,d=fish.one(window);c.pageMask&&(c.pageMask.style.height=d.height()+"px",c.pageMask.style.width=d.width()+"px")}function p(i,j,k){var l=fish.one(document).width(),x=fish.one(k).width(),y=fish.one(k).height(),z=fish.one(window).height();fish.one(document).height();if(j.relative){var A=fish.all(j.relative);return offset_=A.offset(),i.left=offset_.left+(j.left||0)+"px",void (i.top=offset_.top+A.height()+(j.top||0)+"px")}i.left=j.pageWidth?j.left?j.left+(l-j.pageWidth)/2+"px":(l-x)/2+"px":(l-x)/2+"px",i.top=(j.top||(j.fixed?0:fish.one(document).scrollTop())+(z-y)/2)+"px"}function q(){var b=this,g=b._options;g.isModal!==!1&&n.call(b);var h=document.createElement("div");h.className="dialog-ui "+(g.className||""),b.elem=h,b._elem=fish.one(h);var i="position:"+(g.fixed?"fixed":"absolute")+";left:0;top:0;z-index:"+b.zIndexObj.content+";display:none;",j="";g.width&&(i+="width:"+g.width+"px;"),g.height&&(i+="height:"+g.height+"px;"),h.style.cssText=i,g.title&&(j='<div class="dialog-title"><p>'+g.title+'</p></div><span class="close-dialog-btn"></span>'),j+='<div class="dialog-content"></div>',h.innerHTML=j,b.conElem=fish.one(".dialog-content",h)[0],"object"!=typeof g.content&&t.call(b),document.body.appendChild(h)}function r(d){var f=this,g=f._options,h=f.elem.style;(!d||g.fixed||g.relative)&&"none"!==h.display&&p(h,g,f.elem)}function s(c){var g=this,c=fish.getEvent(c),x=target=fish.getTarget(c),y=g._options;switch(c.type){case"scroll":r.call(g);break;case"resize":r.call(g,!0),o.call(g);break;case"click":for(;target!==g.pageMask&&target!==g.elem&&target!==document&&target!==document.body;){target=target.parentNode}if(target===g.pageMask&&y.bgClose&&g.close(),target===g.elem&&fish.one(x).hasClass("close-dialog-btn")&&y.closeFn){return void (y.closeFn.apply(g,[g])!==!1&&g.close())}target===g.elem&&"function"==typeof y.click&&y.click.apply(g,[g,x]);break;case"mousedown":fish.preventDefault(c),fish.stopBubble(c);var z=g._elem.offset();g.dragable.mdown=!0,g.dragable.moveLeft=c.clientX-z.left,g.dragable.moveTop=c.clientY-z.top;break;case"mousemove":if(!g.dragable.mdown){return}var A=fish.one(document),B=fish.one(window),C=B.height(),D=A.width(),E=g._elem.width(),F=g._elem.height(),G=c.clientX-g.dragable.moveLeft,H=c.clientY-g.dragable.moveTop;G=0>=G?0:G>D-E?D-E:G,H=0>=H?0:H>C+B.scrollTop()-F?C+B.scrollTop()-F:H,g._elem.css("left:"+G+"px;top:"+H+"px;");break;case"mouseup":fish.preventDefault(c),fish.stopBubble(c),g.dragable.mdown=!1}}function t(){var d=this,f=d._options;if("string"==typeof f.content){d.conElem.innerHTML=f.content}else{if(/object/i.test(typeof f.content)){var g="1"==f.content.nodeType?f.content:f.content[0];if(g.parentNode===d.conElem){return}g.style.display&&g.setAttribute("data-original-display",g.style.display),g.style.display="block",d.recordParent=g.parentNode,d.recordPoint=g.nextSibling,f.content=g,d.conElem.appendChild(f.content)}}}function u(a){var f=this;if(f.zIndexObj=w,a.zIndex){switch(Object.prototype.toString.call(a.zIndex)){case"[object Array]":2===a.zIndex.length?(f.zIndexObj.mask=a.zIndex[1],f.zIndexObj.content=a.zIndex[0]):e.zIndexObj.content=a.zIndex[0];break;case"[object Number]":case"[object String]":f.zIndexObj.content=parseInt(a.zIndex,10)}}var g=fish.lang.extend({fixed:!0,title:!1,isModal:!0},a);f._options=g,f.eventHand=m(s,f),q.call(f),"function"==typeof g.click&&f._elem.on("click",f.eventHand),g.dragable&&(f.dragable={},f._elem.on("mousedown",f.eventHand).on("mousemove",f.eventHand).on("mouseup",f.eventHand),fish.one(document).on("mouseup",f.eventHand)),g.show&&f.show()}function v(){var d=this,f=d._options.content;if(d.recordParent){d.recordParent.insertBefore(f,d.recordPoint);var g=f.getAttribute("data-original-display");f.style.display=g?g:"",d.recordParent=d.recordParent=null}}var w={mask:9000,content:9001};u.prototype.content=function(b){b&&(v.call(me),opts.content=b)},u.prototype.show=function(c){var d=this,f=d._options;f.beforeOpen&&f.beforeOpen.call(d)===!1||(c&&(v.call(d),f.content=c),f.transition,d.elem.style.display="block",d.pageMask&&(d.pageMask.style.display="block"),t.call(d),o.call(d),p(d.elem.style,d._options,d.elem,!0),fish.one(window).on("resize",d.eventHand),f.fixed&&fish.one(window).on("scroll",d.eventHand))},u.prototype.close=function(){var c=this,d=c._options;("function"!=typeof d.beforeClose||d.beforeClose.call(c)!==!1)&&(c.elem.style.display="none",c.pageMask&&(c.pageMask.style.display="none"),v.call(c),fish.one(window).off("resize",c.eventHand).off("scroll",c.eventHand),"function"==typeof d.afterClose&&d.afterClose())},u.prototype.destroy=function(){var b=this;fish.one(window).off("resize",b.eventHand).off("scroll",b.eventHand),b._elem.off("click",b.eventHand),b.elem.parentNode.removeChild(b.elem),b.pageMask&&(b.pageMask.parentNode.removeChild(b.pageMask),fish.one(b.pageMask).off("click",b.eventHand))},fish.extend({dialog:function(b){return new u(b)}})}();